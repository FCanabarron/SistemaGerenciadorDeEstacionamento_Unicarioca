#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
void limparVagas(int *vaga, int *num);

int main()
{
	int num,user,vaga[51],opcao;
	char placa[user][8], cor[user][16], modelo[user][16];
	int diaE[user],mesE[user],horaE[user],minE[user];
	int diaS[user],mesS[user],horaS[user],minS[user];
	//ctime_ini
    time_t dataIni[user],dataFim[user];
    dataIni[user]=0; 
	dataFim[user]=0;
    tm *dataIniPnt=localtime(&dataIni[user]); //seta
	tm *dataFimPnt=localtime(&dataFim[user]); //seta
	//ctime_fim
	
	limparVagas(vaga, &num);
	printf("\nok");
	
	do
	{
		printf ("\n\n");
		printf ("\t823 - INTRODUCAO A PROGRAMACAO 2016/2\n");
		printf ("\t2016200484 - Lucas Moreira Peres Barga\n");
		printf ("\tSistema Gerenciador de Estacionamento\n");
		
		printf ("\n\nMenu: \n");
		printf ("1- Entrada veiculo\n");
		printf ("2- Saida veiculo\n");
		printf ("3- XXX\n");
		printf ("0- Sair do programa\n");
		
		printf("\nOpcao: ");
		scanf("%d",&opcao);
		
		switch(opcao)
		{
			case 1:
				//ENTRADA
				printf("\n\n Numero da vaga (1~50): ");
				scanf ("%d", &num);
				user<-num;
				
				if(num<=50)
				{
					if(vaga[num] == 0)
					{
						printf("\nok");
						
						printf("\n\n Vaga Disponivel!\n\n");
						
						printf("\nInformacoes do veiculo\n");
						printf("Placa:");
						scanf("%s", &placa[user]);
						printf("Cor:");
						scanf("%s", &cor[user]);
						printf("Modelo:");
						scanf("%s", &modelo[user]);
						
						printf("\nData e hora de entrada\n");
						printf("Dia:");
						scanf("%d", &diaE[user]);
						printf("Mes:");
						scanf("%d", &mesE[user]);
						printf("Horas:");
						scanf("%d", &horaE[user]);
						printf("Minutos:");
						scanf("%d", &minE[user]);
												
						//atribui valores
						dataIniPnt->tm_mday =diaE[user];
						dataIniPnt->tm_mon=mesE[user];
						dataIniPnt->tm_hour=horaE[user];
						dataIniPnt->tm_min=minE[user];
					}
					else
					{
						printf("\n\nVaga ocupada, escolha outra vaga.\n\n");
					}
				}
				else
				{
					printf("\n\nVaga nao existente!\n\n");
				}
				
			break;	
		}
	}while(opcao!=0);
	
return 0;

}

void limparVagas(int *vaga, int *num)
{	
	for (*num = 1; *num <= 50;*num=*num+1)
	{
		vaga[*num] = 0;;
		printf("\n%d", vaga[*num]);
	}
}	
